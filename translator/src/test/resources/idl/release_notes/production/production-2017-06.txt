2017/06/26 (2.0.170626)
泡泡图集实体增加新字段-创建者、排序和封面图id
1. /entity/schema-1470-image-album.fproto
message ImageAlbum {
  //创建者id
  optional int64 creator_id = 10 [(field_option).column_group = CREATOR_ID, (column_option).column_name = "c_10_n"];
}
2. /knowledge/pub/metadatas.proto
message PaopaoSummary {
  //图集在圈子中的排序
  optional int32 image_album_order = 6;
}
message ImageAlbumMetadata {
  //封面图关联明星美图id
  optional int64 cover_image_id = 4;
}
3. /knowledge/pub/common.proto
enum ColumnGroup {
  CREATOR_ID = 593;
}
2017/06/23 (2.0.170623)
直播节目增加logo隐藏字段
1. /knowledge/pub/properties.proto
message LiveEpisodeBase {
  //logo水印屏蔽位置
  repeated LogoHidden logo_hidden = 37;
}
2017/06/22 (2.0.170622)
体育赛事扩展字段-C2F
1. /knowledge/pub/common.proto
enum MatchStage {
  //淘汰赛
  MATCH_STAGE_KNOCKOUT = 13;
}
/**
 * @brief 赛事项目
 **/
enum CompetitionEvent {
  //未知项目
  UNKNOWN_COMPETITION_EVENT = -1;
  //足球
  COMPETITION_EVENT_FOOTBALL = 0;
  //篮球
  COMPETITION_EVENT_BASKETBALL = 1;
  //网球
  COMPETITION_EVENT_TENNIS = 2;
  //高尔夫
  COMPETITION_EVENT_GOLF = 3;
}
2. /knowledge/pub/metadatas.proto
message CompetitorInfo {
  //比赛选手
  repeated MatchPlayer player = 9;
  //比赛每小节结果
  repeated MatchInningResult inning_result = 10;
  //比赛结果
  optional string result = 11;
}
/**
 * @brief 比赛选手
 **/
message MatchPlayer {
  //选手id
  optional int64 id = 1;
  //选手姓名
  optional string name = 2;
}
/**
 * @brief 比赛每小节结果
 **/
message MatchInningResult {
  //比赛小节顺序
  optional int32 order = 1;
  //比赛小节结果
  optional string result = 2;
}
message CompetitionMetadata {
  //赛事项目
  optional CompetitionEvent event = 14 [default = UNKNOWN_COMPETITION_EVENT];
}
/**
 * @brief 比赛每小节结果
 **/
message MatchInningResult {
  //比赛小节顺序
  optional int32 order = 1;
  //比赛小节结果
  optional string result = 2;
}
message MatchMetadata {
  //分站赛标题
  optional string sub_match_title = 10;
}
3. /entity/schema-23-live-episode.fproto
message LiveEpisode {
  //关联赛事
  optional MatchSummary match_summary = 42 [(field_option).column_group = MATCH_SUMMARY, (column_option).column_name = "match_smry"];
}
2017/06/20 (2.0.170620)
lego2.0&3.0数据结构增加屏蔽水印的字段
1. /knowledge/pub/common.proto
/**
 * @brief logo水印屏蔽位置
 **/
enum LogoHidden {
  //位置位置屏蔽logo
  UNKNOWN_LOGO_HIDDEN = 0;
  //右上角屏蔽logo
  LOGO_HIDDEN_RIGHT_UP = 1;
  //右下角屏蔽logo
  LOGO_HIDDEN_RIGHT_DOWN = 2;
  //左上角屏蔽logo
  LOGO_HIDDEN_LEFT_UP = 3;
  //左下角屏蔽logo
  LOGO_HIDDEN_LEFT_DOWN = 4;
}
2. /knowledge/pub/properties.proto
message OperationBase {
  //logo水印屏蔽位置
  repeated LogoHidden logo_hidden = 14;
}
message Base {
  //logo水印屏蔽位置
  repeated LogoHidden logo_hidden = 39;
}
2017/06/19 (2.0.170619)
新增IP关联位游戏赛事实体
1. /knowledge/pub/common.proto
enum EntityIdType {
  //游戏专场
  GAME_ACTIVITY = 1770;
}
enum Table {
  //游戏专场
  GAME_ACTIVITY_TABLE = 67;
}
enum ColumnGroup {
  MAIN_TAG = 584;
  RECOMMENDED_TAG = 585;
  IS_WEB = 586;
  HOME_PAGE_URL = 587;
  INWARD_GAME_ID = 588;
  GAME_ACTIVITY_SUMMARY = 589;
}
2. /knowledge/fusion/query/properties.proto
message QipuEntity {
  //游戏专场
  optional GameActivity game_activity = 69;
}
3. /knowledge/pub/read_service.proto
message GetEntityResponse {
  // Response for request of entity: GameActivity
  repeated GameActivity game_activity = 69;
}
4. /knowledge/pub/write_rpc_service.thrift

  /**
   * The write interfaces of setting for GameActivity.
   * Set all field of GameActivity,
   * or throws an exception if this operation is not valid.
   */
  binary setGameActivity(1:binary set_game_activity_request)
      throws (1:InvalidWriteOperation e);
5. /knowledge/pub/write_service.proto

// Proto for setHeadLineAlbum method defined in write_rpc_service.thrift
message SetGameActivityRequest {
  //option
  option (request_options).set_table = GAME_ACTIVITY_TABLE;
  option (request_options).set_interface = "setGameActivity";

  required User user = 1;

  optional GameActivity merge_game_activity = 2;
  optional GameActivity delete_game_activity = 3;

  // Whether to send message to activeMQ to notify audience. If you don't know
  // what exactly it is, leave it as default.
  optional bool should_notify_audience = 4 [default = true];

  // If you're doing a batch update,
  // please consider setting is_updated_in_batch_mode = true.
  // So the audience will know this is a batch update,
  // in which they may optimize the message processing.
  optional bool is_updated_in_batch_mode = 5 [default = false];

  // 消息优先级
  optional Priority priority = 6;
}
6. /entity/schema-1770-game-activity.fproto
/**
 * @brief 游戏专场
 * @details 游戏20实体扩展游戏专场实体
 **/
message GameActivity {
  //option
  option (entity_option).table = GAME_ACTIVITY_TABLE;
  option (entity_option).entity_name = "game_activity";
  option (table_option).hbase_table_name = "qipu_game_activity_table";
  option (entity_option).entity_id_type = GAME_ACTIVITY;
  //游戏专场id
  required int64 id = 1 [(column_option).is_auto_set = true];
  //是否删除
  optional bool deleted = 2 [default = false, (column_option).has_value = false, (field_option).column_group = DELETED, (column_option).column_name = "del"];
  //游戏专场的编目信息
  optional AppGroupMetadata metadata = 3 [(field_option).column_group = METADATA, (column_option).column_name = "metadata"];
  //主标签
  optional string main_tag = 4 [(field_option).column_group = MAIN_TAG, (column_option).column_name = "main_tag"];
  //推荐标签
  repeated string recommended_tag = 5 [(field_option).column_group = RECOMMENDED_TAG, (column_option).column_name = "rcmded_tag"];
  //运营信息
  optional AppBase base = 6 [(field_option).column_group = BASE, (column_option).column_name = "base"];
  //是否网页访问
  optional bool is_web = 7 [default = false, (field_option).column_group = IS_WEB, (column_option).column_name = "is_web"];
  //专场页面地址
  optional string home_page_url = 8 [(field_option).column_group = HOME_PAGE_URL, (column_option).column_name = "hme_pge_url"];
  //游戏业务内部游戏id
  optional int64 inward_game_id = 9 [(field_option).column_group = INWARD_GAME_ID, (column_option).column_name = "inwd_gme_id"];
  //IP关联
  optional IntellectualPropertySummary ip_summary = 10 [(field_option).column_group = IP_SUMMARY, (column_option).column_name = "ip_smry"];
  //最后更新时间，任何字段更新都会导致这个最后更新时间被修改。这个字段由奇谱自动维护。
  optional int64 last_update_time = 11 [(field_option).column_group = LAST_UPDATE_TIME, (column_option).column_name = "lut", (column_option).is_auto_set = true, (track_option).notracker=true];
}
7. /entity/schema-0770-intellectual-property.fproto
message IntellectualProperty {
  //游戏专场
  repeated IntellectualPropertySummary game_activity_summary = 13 [(field_option).column_group = GAME_ACTIVITY_SUMMARY, (column_option).column_name = "gme_acty_smry_", (column_option).column_suffix = "${entity_id}"];
}
2017/06/14 (2.0.170614)
头条新增专题实体
1. /knowledge/pub/common.proto
enum EntityIdType {
  //头条专辑
  HEAD_LINE_ALBUM = 1670;
}
/**
 * @brief 头条专辑类型
 **/
enum HeadLineAlbumType {
  //未知
  UNKNOWN_HEAD_LINE_ALBUM_TYPE = -1;
  //自动
  HEAD_LINE_ALBUM_TYPE_AUTO = 0;
  //人工
  HEAD_LINE_ALBUM_TYPE_MANUAL = 1;
}
enum Table {
  //头条专辑
  HEAD_LINE_ALBUM_TABLE = 66;
}
/**
 * @brief 头条专题上下线状态
 * @details 头条专题上下线状态
 **/
enum HeadLineAlbumAvailableStatus {
  //未知
  UNKNOWN_HEAD_LINE_ALBUM_AVAILABLE_STATUS = -1;
  //下线
  HEAD_LINE_ALBUM_AVAILABLE_STATUS_OFFLINE = 0;
  //上线
  HEAD_LINE_ALBUM_AVAILABLE_STATUS_ONLINE = 1;
}
/**
 * @brief 头条专辑类型
 **/
enum HeadLineAlbumType {
  //未知
  UNKNOWN_HEAD_LINE_ALBUM_TYPE = -1;
  //自动
  HEAD_LINE_ALBUM_TYPE_AUTO = 0;
  //人工
  HEAD_LINE_ALBUM_TYPE_MANUAL = 1;
}
enum ColumnGroup {
  CARD_SUMMARY = 577;
  ALBUM_TYPE = 581;
  IQIYI_ORIGINAL_INFO = 580;
  UPLOADER_INFO = 578;
  DETAIL_PAGE_INFO = 579;
}
2. /knowledge/fusion/query/properties.proto
message QipuEntity {
  //头条专辑
  optional HeadLineAlbum head_line_album = 68;
}
3. /knowledge/pub/read_service.proto
message GetEntityResponse {
  // Response for request of entity: HeadLineAlbum
  repeated HeadLineAlbum head_line_album = 68;
}
4. /knowledge/pub/write_rpc_service.thrift
  /**
   * The write interfaces of setting for HeadLineAlbum.
   * Set all field of HeadLineAlbum,
   * or throws an exception if this operation is not valid.
   */
  binary setHeadLineAlbum(1:binary set_head_line_album_request)
      throws (1:InvalidWriteOperation e);
5. /knowledge/pub/write_service.proto

// Proto for setHeadLineAlbum method defined in write_rpc_service.thrift
message SetHeadLineAlbumRequest {
  //option
  option (request_options).set_table = HEAD_LINE_ALBUM_TABLE;
  option (request_options).set_interface = "setHeadLineAlbum";

  required User user = 1;

  optional HeadLineAlbum merge_head_line_album = 2;
  optional HeadLineAlbum delete_head_line_album = 3;

  // Whether to send message to activeMQ to notify audience. If you don't know
  // what exactly it is, leave it as default.
  optional bool should_notify_audience = 4 [default = true];

  // If you're doing a batch update,
  // please consider setting is_updated_in_batch_mode = true.
  // So the audience will know this is a batch update,
  // in which they may optimize the message processing.
  optional bool is_updated_in_batch_mode = 5 [default = false];

  // 消息优先级
  optional Priority priority = 6;
}
6. /entity/schema-1670-head-line-album.fproto
/**
 * @brief 头条专辑
 * @details 头条专辑
 **/
message HeadLineAlbum {
  //option
  option (entity_option).table = HEAD_LINE_ALBUM_TABLE;
  option (entity_option).entity_name = "head_line_album";
  option (table_option).hbase_table_name = "qipu_head_line_album_table";
  option (entity_option).entity_id_type = HEAD_LINE_ALBUM;
  //实体id
  required int64 id = 1 [(column_option).is_auto_set = true];
  //头条专辑Meta信息
  optional HeadLineAlbumMetadata metadata = 2 [(field_option).column_group = METADATA, (column_option).column_name = "meta"];
  //内容摘要
  repeated HeadLineAlbumCardSummary card_summary = 3 [(field_option).column_group = CARD_SUMMARY, (column_option).column_name = "card_summary_", (column_option).column_suffix = "${order}"];
  //频道
  repeated int32 channel_id = 4 [(field_option).column_group = CHANNEL_ID, (column_option).column_name = "channel_id_"];
  //标签
  repeated string tag = 5 [(field_option).column_group = TAG, (column_option).column_name = "tag_"];
  //详情页信息
  optional HeadLineAlbumAvailableStatus available_status = 6 [default = HEAD_LINE_ALBUM_AVAILABLE_STATUS_OFFLINE, (field_option).column_group = AVAILABLE_STATUS, (column_option).column_name = "avail"];
  //最后更新时间
  optional int64 last_update_time = 7 [(field_option).column_group = LAST_UPDATE_TIME, (column_option).column_name = "lut", (column_option).is_auto_set = true, (track_option).notracker=true];
  //创建时间
  optional int64 create_time = 8 [(field_option).column_group = CREATE_TIME, (column_option).column_name = "create_time"];
  //头条专辑类型
  optional HeadLineAlbumType album_type = 9 [default = HEAD_LINE_ALBUM_TYPE_AUTO, (field_option).column_group = ALBUM_TYPE, (column_option).column_name = "album_type"];
  //头条专辑原站点信息
  optional HeadLineIqiyiOriginalInfo iqiyi_original_info = 10 [(field_option).column_group = IQIYI_ORIGINAL_INFO, (column_option).column_name = "iqy_orgl_info"];
  //上传者信息
  optional HeadLineAlbumUploaderInfo uploader_info = 11 [(field_option).column_group = UPLOADER_INFO, (column_option).column_name = "uploader_info"];
  //详情页信息
  optional HeadLineAlbumDetailPageInfo detail_page_info = 12 [(field_option).column_group = DETAIL_PAGE_INFO, (column_option).column_name = "detail_page_info"];
  //是否删除
  optional bool deleted = 13 [default = false, (column_option).has_value = false, (field_option).column_group = DELETED, (column_option).column_name = "del"];
}
7. /knowledge/pub/metadatas.proto
/**
 * @brief 头条专辑card包含的头条摘要
 * @details 头条专辑card包含的头条摘要
 **/
message HeadLineAlbumElementSummary {
  //card内头条的id
  optional int64 entity_id = 1;
  //card内头条的顺序
  optional int32 order = 2;
  //card内的头条标题
  optional string title = 3;
  //card内的头条图片地址
  optional string image = 4;
}
/**
 * @brief 头条专辑上传者信息
 * @details 头条专辑上传者信息
 **/
message HeadLineAlbumUploaderInfo {
  //上传者ID
  optional int64 uploader_id = 1;
}
/**
 * @brief 内容摘要
 **/
message HeadLineAlbumCardSummary {
  //专题内card顺序
  optional int32 order = 1;
  //专题内card标题
  optional string title = 2;
  //专题内card id
  optional int64 card_id = 3;
  //头条专题card包含的头条摘要
  repeated HeadLineAlbumElementSummary element_summary = 4;
}
/**
 * @brief 头条专辑详原站点信息
 **/
message HeadLineIqiyiOriginalInfo {
  //视频ID
  optional int64 entity_id = 1;
  //视频频道ID
  optional int32 channel_id = 2;
  //视频创建时间
  optional int64 create_time = 3;
}
/**
 * @brief 头条专辑meta信息
 **/
message HeadLineAlbumMetadata {
  //专题id
  optional int64 entity_id = 1;
  //专题标题
  optional string title = 2;
  //专题封面图
  optional string image = 3;
  //专题描述
  optional string description = 4;
}
/**
 * @brief 内容摘要
 **/
message HeadLineAlbumCardSummary {
  //专题内card顺序
  optional int32 order = 1;
  //专题内card标题
  optional string title = 2;
  //专题内card id
  optional int64 card_id = 3;
  //头条专题card包含的头条摘要
  repeated HeadLineAlbumElementSummary element_summary = 4;
}
/**
 * @brief 头条专辑上传者信息
 * @details 头条专辑上传者信息
 **/
message HeadLineAlbumUploaderInfo {
  //上传者ID
  optional int64 uploader_id = 1;
}
/**
 * @brief 头条专辑详情页信息
 **/
message HeadLineAlbumDetailPageInfo {
  //详情页标题
  optional string title = 1;
  //详情页banner图
  optional string banner_image = 2;
  //详情页导语
  optional string banner_text = 3;
}
/**
 * @brief 头条专辑card包含的头条摘要
 * @details 头条专辑card包含的头条摘要
 **/
message HeadLineAlbumElementSummary {
  //card内头条的id
  optional int64 entity_id = 1;
  //card内头条的顺序
  optional int32 order = 2;
  //card内的头条标题
  optional string title = 3;
  //card内的头条图片地址
  optional string image = 4;
}
/**
 * @brief 头条专辑详原站点信息
 **/
message HeadLineIqiyiOriginalInfo {
  //视频ID
  optional int64 entity_id = 1;
  //视频频道ID
  optional int32 channel_id = 2;
  //视频创建时间
  optional int64 create_time = 3;
}
/**
 * @brief 头条专辑详情页信息
 **/
message HeadLineAlbumDetailPageInfo {
  //详情页标题
  optional string title = 1;
  //详情页banner图
  optional string banner_image = 2;
  //详情页导语
  optional string banner_text = 3;
}
2017/06/12 (2.0.170612)
00和09实体增加套壳feed信息
1. /knowledge/pub/metadatas.proto
/**
 * @brief 相关feed
 **/
message FeedSummary {
  //feed id
  optional int64 entity_id = 1;
}
2. /entity/schema-00-episode.fproto
message Episode {
  //相关feed
  repeated FeedSummary feed_summary = 221 [(field_option).column_group = FEED_SUMMARY, (column_option).column_name = "c_221_n_", (column_option).column_suffix = "${entity_id}"];
}
3. /entity/schema-09-ugc-episode.fproto
message UgcEpisode {
  //相关feed
  repeated FeedSummary feed_summary = 107 [(field_option).column_group = FEED_SUMMARY, (column_option).column_name = "c_107_n_", (column_option).column_suffix = "${entity_id}"];
}
2017/06/09 (2.0.170609)
漫画图片优化增加奇谱字段
1. /entity/schema-0170-comic-book-chapter.fproto
message ComicBookChapter {
  //定宽章节JPG图片大小
  optional int64 total_fixed_width_image_size_byte = 36 [(field_option).column_group = TOTAL_FIXED_WIDTH_IMAGE_SIZE_BYTE, (column_option).column_name = "c_36_n"];
  //原图章节WEBP图片大小
  optional int64 total_webp_original_image_size_byte = 37 [(field_option).column_group = TOTAL_WEBP_ORIGINAL_IMAGE_SIZE_BYTE, (column_option).column_name = "c_37_n"];
  //定宽章节WEBP图片大小
  optional int64 total_webp_fixed_width_image_size_byte = 38 [(field_option).column_group = TOTAL_WEBP_FIXED_WIDTH_IMAGE_SIZE_BYTE, (column_option).column_name = "c_38_n"];
}
2. /knowledge/pub/formats.proto
enum FileType {
    //webp格式
    WEBP = 3;
}
enum ImageQuality {
    //定宽
    FIXED_WIDTH = 2;
}
enum ImageType {
    //WEBP格式
    WEBP = 3;
}
3. /knowledge/pub/properties.proto
message LocaleImage {
  //webp格式图片地址
  optional string image_webp_url = 11;
}
4. /knowledge/pub/common.proto
enum ColumnGroup {
  TOTAL_FIXED_WIDTH_IMAGE_SIZE_BYTE = 590;
  TOTAL_WEBP_ORIGINAL_IMAGE_SIZE_BYTE = 591;
  TOTAL_WEBP_FIXED_WIDTH_IMAGE_SIZE_BYTE = 592;
}
2017/06/09 (2.0.170609)
knowledge.graph.pub.properties.proto中
AlbumVideoData增加字段
  optional bool qiyu_is_focus_valid = 81;
标识焦点图是否有效

2017/06/04 (2.0.170604)
角色增加角色图片数据类型
1. entity/schema-36-character.fproto
message Character {
  //角色图片
  optional CharacterImageList character_image_list = 13 [(field_option).column_group = CHARACTER_IMAGE_LIST, (column_option).column_name = "chract_img_lst"];
}

2. knowledge/pub/common.proto
enum ColumnGroup {
  CHARACTER_IMAGE_LIST = 574;
}

/**
 * @brief 角色图片类型
 **/
enum CharacterImageType {
  //位置类型
  UNKNOWN_CHARACTER_IMAGE_TYPE = -1;
  //全身
  CHARACTER_IMAGE_TYPE_BODY = 1;
}

3. knowledge/pub/metadatas.proto
/**
 * @brief 角色图片
 **/
message CharacterImage {
  //角色图片类型
  optional CharacterImageType image_type = 1;
  //角色图片格式
  optional string format = 2;
  //图片地址
  optional string image_url = 3;
  //图片宽度
  optional int64 width = 4;
  //图片高度
  optional int64 height = 5;
}

/**
 * @brief 角色图片列表
 **/
message CharacterImageList {
  // 角色图片
  repeated CharacterImage character_image = 1;
}

2017/06/02 (2.0.170602)
动画屋数据结构扩展
1. /knowledge/pub/properties.proto
message IqiyiChild {
  //推荐等级
  optional EditorRecommendLevel editor_recommend_level = 3;
  //类型
  optional string type = 4;
  //主题
  optional string subject_matter = 5;
  //性别
  optional PeopleMetadata.Gender gender = 6;
  //发行商
  optional string publisher = 7;
  //地区
  optional string region = 8;
  //自定义标签
  repeated string tag = 9;
  //包含的角色id
  repeated int64 character = 10;
}
2017/06/02 (2.0.170602)
视频动画屋字段增加年龄阶段枚举值
1. /knowledge/pub/common.proto
enum ChildAge {
  //0岁以下
  CHILD_AGE_BELOW_0 = 0;
}
2017/06/01 (2.0.170601)
泡泡圈子新增明星圈和粉丝圈两个展现控制字段
1. /entity/schema-47-circle.fproto
message Circle {
  //是否展现抓取feed
  optional bool display_crawl_feed = 38 [default = true, (field_option).column_group = DISPLAY_CRAWL_FEED, (column_option).column_name = "dspl_crl_fd"];
  //是否展现套壳feed
  optional bool display_shell_feed = 39 [default = true, (field_option).column_group = DISPLAY_SHELL_FEED, (column_option).column_name = "dspl_shl_fd"];
}
2. /knowledge/pub/common.proto
enum ColumnGroup {
  DISPLAY_CRAWL_FEED = 582;
  DISPLAY_SHELL_FEED = 583;
}
