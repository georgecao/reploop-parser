2018/03/29 (2.0.180329)
IP关联表新增NLP自动识别的垂线产品关联
1. /entity/schema-0770-intellectual-property.fproto
message IntellectualProperty {
  //NLP文学
  repeated IntellectualPropertySummary nlp_book_summary = 15 [(field_option).column_group = NLP_BOOK_SUMMARY, (column_option).column_name = "c_15_n_", (column_option).column_suffix = "${entity_id}"];
  //nlp漫画
  repeated IntellectualPropertySummary nlp_comicbook_summary = 16 [(field_option).column_group = NLP_COMICBOOK_SUMMARY, (column_option).column_name = "c_16_n_", (column_option).column_suffix = "${entity_id}"];
  //nlp游戏
  repeated IntellectualPropertySummary nlp_game_summary = 17 [(field_option).column_group = NLP_GAME_SUMMARY, (column_option).column_name = "c_17_n_", (column_option).column_suffix = "${entity_id}"];
  //nlp电影票
  repeated IntellectualPropertySummary nlp_ticket_summary = 18 [(field_option).column_group = NLP_TICKET_SUMMARY, (column_option).column_name = "c_18_n_", (column_option).column_suffix = "${entity_id}"];
  //nlp电商商品
  repeated IntellectualPropertySummary nlp_commodity_summary = 19 [(field_option).column_group = NLP_COMMODITY_SUMMARY, (column_option).column_name = "c_19_n_", (column_option).column_suffix = "${entity_id}"];
}
2. /knowledge/pub/common.proto
enum ColumnGroup {
  NLP_BOOK_SUMMARY = 674;
  NLP_COMICBOOK_SUMMARY = 675;
  NLP_GAME_SUMMARY = 676;
  NLP_TICKET_SUMMARY = 677;
  NLP_COMMODITY_SUMMARY = 678;
}
2018/03/26 (2.0.180326)
00和01PGC内容新增安全审核
1. /knowledge/pub/properties.proto
/**
 * @brief PGC审核信息
 **/
message PgcCheck {
  //安全审核
  optional SafetyCheck safety_check = 1;
}
2. /knowledge/pub/common.proto
/**
 * @brief 安全检查
 **/
enum SafetyCheck {
  //未知审核
  UNKNOWN_SAFETY_CHECK = -1;
  //机器审核
  SAFETY_CHECK_MACHINE = 0;
  //人工审核
  SAFETY_CHECK_MANUAL = 1;
}
enum ColumnGroup {
  PGC_CHECK = 679;
}
3. /entity/schema-01-album.fproto
message Album {
  //PGC审核信息
  optional PgcCheck pgc_check = 227 [(field_option).column_group = PGC_CHECK, (column_option).column_name = "c_227_n"];
}
4. /entity/schema-00-episode.fproto
message Episode {
  //PGC审核信息
  optional PgcCheck pgc_check = 245 [(field_option).column_group = PGC_CHECK, (column_option).column_name = "c_245_n"];
}
2018/03/26 (2.0.180326)
00增加PCW封面短视频集锦summary
1. /knowledge/pub/common.proto
enum ColumnGroup {
  VIDEO_COVER_SUMMARY = 649;
}
/**
 * @brief 动态视频封面类型
 **/
enum VideoCoverType {
  //未知类型
  UNKNOWN_VIDEO_COVER_TYPE = -1;
  //机器自动生成
  VIDEO_COVER_TYPE_MACHINE = 0;
  //人工生产
  VIDEO_COVER_TYPE_MANUAL = 1;
  //其他类型
  VIDEO_COVER_TYPE_OTHER = 2;
}
2. /entity/schema-00-episode.fproto
message Episode {
  //动态视频封面
  repeated MetaSummary video_cover_summary = 236 [(field_option).column_group = VIDEO_COVER_SUMMARY, (column_option).column_name = "c_236_n_", (column_option).column_suffix = "${entity_id}"];
}
3. /knowledge/pub/metadatas.proto
message MetaSummary {
  //动态视频封面图类型
  optional VideoCoverType video_cover_type = 40 [default = UNKNOWN_VIDEO_COVER_TYPE];
}
2018/03/26 (2.0.180326)
00新增封面视频字段
1. /knowledge/pub/common.proto
enum ContentType {
  //视频封面
  VIDEO_COVER = 26;
}
enum ColumnGroup {
  VIDEO_COVER_FATHER_EPISODE = 682;
}
2. /entity/schema-00-episode.fproto
message Episode {
  //封面视频的父视频信息
  optional FatherInfo video_cover_father_episode = 246 [(field_option).column_group = VIDEO_COVER_FATHER_EPISODE, (column_option).column_name = "c_246_n"];
}
2018/03/22 (2.0.180322)
48 feed实体添加tag_summary标签字段
1. /entity/schema-48-circle-feed.fproto
message CircleFeed {
  //关联标签
  repeated TagSummary tag_summary = 63 [(field_option).column_group = TAG_SUMMARY, (column_option).column_name = "c_63_n_", (column_option).column_suffix = "${source_type}"];
}
2018/03/19 (2.0.180319)
39book文学的授权方式新增转授权枚举
1. /knowledge/pub/common.proto
/**
 * @brief 转授权状态
 **/
enum DelegationAuthStatus {
  //转授权未知
  UNKNOWN_DELEGATION_AUTH_STATUS = -1;
  //转授权无效
  DELEGATION_AUTH_STATUS_INVALID = 0;
  //转授权有效
  DELEGATION_AUTH_STATUS_VALID = 1;
}
2. /knowledge/pub/properties.proto
message BookBase {
  //转授权状态
  optional DelegationAuthStatus delegation_auth_status = 10 [default = UNKNOWN_DELEGATION_AUTH_STATUS];
}

2018/03/18 (2.0.180318)
message GetVideosByTitleOrPageUrlRequest {
  optional knowledge.pub.User user = 1;
  optional string title = 2;
  optional string pageUrl = 3;
  optional int32 from = 4 [default = 0];
  optional int32 size = 5 [default = 10];
  optional SiteType iqiyi_site = 6 [default = SITE_ZH];
  repeated Language iqiyi_language = 7;
  optional int32 max_duration = 8;
  optional int32 min_duration = 9;
  repeated string source_provider = 10;
  option (knowledge.pub.service_message_options).method_name = "getVideosByTitleOrPageUrl";
  option (knowledge.pub.service_message_options).type = REQUEST;
}

2018/03/15 (2.0.180315)
48 feed新增PPC直播子类型
1. /knowledge/pub/common.proto
enum FeedLiveVideoExtendedType {
  //PPC直播
  FEED_LIVE_VIDEO_EXTENDED_TYPE_PPC = 5;
}
2018/03/13 (2.0.180313)
21feed评论新增业务类型
1. /knowledge/pub/common.proto
enum CircleFeedCommentBusinessType {
  //明星行程
  FEED_COMMENT_BUSINESS_TYPE_PAOPAO_STAR_SCHEDULE = 4;
  //泡泡榜单页
  FEED_COMMENT_BUSINESS_TYPE_PAOPAO_TOP_LIST = 5;
  //视频片段
  FEED_COMMENT_BUSINESS_TYPE_PAOPAO_VIDEO_CUT = 6;
  //文学章节
  FEED_COMMENT_BUSINESS_TYPE_BOOK_CHAPTER = 7;
  //啪啪奇
  FEED_COMMENT_BUSINESS_TYPE_PAPAQI = 10;
}
2018/03/13 (2.0.180313)
VIP ACGN新增通用FUN会员
1. /knowledge/pub/common.proto
enum VipType {
  //FUN会员（会员&ACGN联合会员，动漫由会员维护，轻小说&漫画由ACGN维护）
  VIP_TYPE_FUN_VIP = 5;
}
2018/03/13 (2.0.180313)
0670下CreateSource新增枚举
1. /knowledge/pub/common.proto
enum CreateSource {
  //自动爬取
  CREATE_SOURCE_CRAWL = 2;
}
2018/03/13 (2.0.180313)
1870和2070新增付费签约等字段
1. /entity/schema-1870-light-novel.fproto
message LightNovel {
  //付费控制信息
  repeated PublicatonChargeControl charge_control = 21 [(field_option).column_group = CHARGE_CONTROL, (column_option).column_name = "c_21_n_", (column_option).column_suffix = "${platform}"];
  //合同号
  //乐高写入
  repeated int64 contract_code = 22 [(field_option).column_group = CONTRACT_CODE, (column_option).column_name = "c_22_n_"];
  //版权信息
  //璞玉写入
  repeated Puyu multi_puyu = 23 [(field_option).column_group = MULTI_PUYU, (column_option).column_name = "c_23_n_", (column_option).column_suffix = "${contract_code}"];
}
2. /entity/schema-2070-light-novel-chapter.fproto
message LightNovelChapter {
  //付费控制信息
  repeated PublicatonChargeControl charge_control = 12 [(field_option).column_group = CHARGE_CONTROL, (column_option).column_name = "c_12_n_", (column_option).column_suffix = "${platform}"];
}
2018/03/12 (2.0.180312)
23直播类型新增泡泡明星直播
1. /knowledge/pub/common.proto
enum LiveEpisodeType {
  //泡泡直播
  LIVE_EPISODE_TYPE_PAOPAO = 6;
}
2018/03/12 (2.0.180312)
23直播增加feed_summary结构
1. /entity/schema-23-live-episode.fproto
message LiveEpisode {
  //关联feed
  repeated FeedSummary feed_summary = 44 [(field_option).column_group = FEED_SUMMARY, (column_option).column_name = "c_44_n_", (column_option).column_suffix = "${entity_id}"];
}
2018/03/08 (2.0.180308)
47 圈子新增开放平台创建来源
1. /knowledge/pub/common.proto
enum CircleCreatorType {
  //开发平台创建
  CIRCLE_CREATOR_TYPE_OPEN_PLATFORM = 2;
}
2018/03/07 (2.0.180307)
Vip儿童频道新增儿童会员类型枚举
1. /knowledge/pub/common.proto
enum VipType {
  //儿童会员
  VIP_TYPE_CHILD_VIP = 3;
}
2018/03/06 (2.0.180306)
在01专辑中增加cut_summary
1. /entity/schema-01-album.fproto
message Album {
  //关联的片段（cut）
  //关联的视频
  repeated MetaSummary cut_summary = 226 [(field_option).column_group = CUT_SUMMARY, (column_option).column_name = "c_226_n_", (column_option).column_suffix = "${entity_id}"];
}
2018/03/05 (2.0.180305)
增加AsyncWriteService支持
1. knowledge/pub/activemq_message.proto
message NotificationMessage {
  // 异步写入结果，仅异步写入此字段有值
  optional AsyncWriteResult async_write_result = 11;
}

// 异步写入结果Message定义
message AsyncWriteResult {
  // merge_entity
  optional bytes merge_entity = 12;

  // delete_entity
  optional bytes delete_entity = 13;

  // AsyncWrite result
  optional RpcStatusInfo rpc_status_info = 14;
}

2. knowledge/pub/async_write_rpc_service.thrift
exception AsyncWriteException {
  1: optional string message;
}

service AsyncWriteRpcService {
  // All functions in this service
  //
  // @param binary string of corresponding proto defined in async_write_service.proto
  // @return binary string of WriteResponse defined in async_write_service.proto
  // @throws InvalidAsyncWriteOperation
  /**
   * 异步write统一接口,使用bytes传输数据
   */
  binary writeEntity(1:binary async_write_entity_request)
      throws (1:AsyncWriteException e);
}

3. knowledge/pub/async_write_service.proto
// Proto for return type of methods defined in async_write_rpc_service.thrift
message AsyncWriteResponse {
  optional RpcStatusInfo rpc_status_info = 1;
}

// Proto for writeEntity method defined in async_write_rpc_service.thrift
message AsyncWriteEntityRequest {
  optional User user = 1;

  repeated Entity entity = 2;

  optional string session_uuid = 3;

  message Entity {
    optional int64 entity_id = 1;
    optional bytes merge_entity = 2;
    optional bytes delete_entity = 3;

    // 写入站点
    repeated SiteType site = 4;
  }
}

2018/03/05 (2.0.180305)
00 cut info新增枚举类型支持视频封面
1. /knowledge/pub/common.proto
/**
 * @brief Cut类型
 **/
enum CutType {
  //未知类型
  UNKNOWN_CUT_TYPE = -1;
  //片段
  CUT_TYPE_CLIP = 0;
  //视频封面
  CUT_TYPE_VIDEO_COVER = 1;
}
2. /knowledge/pub/properties.proto
message CutInfo {
  //片段类型
  optional CutType cut_type = 5 [default = UNKNOWN_CUT_TYPE];
}
2018/03/01 (2.0.180301)
48短视频feed新增cut子类型
1. /knowledge/pub/common.proto
enum FeedShortVideoExtendedType {
  //片段视频
  FEED_SHORT_VIDEO_CUT = 7;
}
