// Define the spu information.
message Spu {
  //option
  option (entity_option).table = SPU_TABLE;
  option (entity_option).entity_name = "spu";
  option (table_option).hbase_table_name = "qipu_spu_table";
  option (entity_option).entity_id_type = SPU;

  required int64 id = 1 [(column_option).is_auto_set = true];

  optional SpuBase base = 2 [(field_option).column_group = SPU_BASE, (column_option).column_name = "spu_base"];

  /* The basic property list of sku.
   * Every property contains a pid(ItemProperty.key_id: pid) and vid(ItemProperty.values_id: vid).
   */
  repeated ItemProperty common_property = 3 [(field_option).column_group = ITEM_PROPERTY, (column_option).column_name = "item_property", (column_option).column_suffix = "${key_id}"];

  optional int64 last_update_time = 4 [(field_option).column_group = LAST_UPDATE_TIME, (column_option).column_name = "lut", (column_option).is_auto_set = true, (track_option).notracker=true];

  // The related album | episode | people entity summary of spu.
  // It's a one-way relationship, so that can't find the spu through entity: album | episode | people.
  repeated MetaSummary album_summary = 5 [(field_option).column_group = CHILD_ALBUM, (column_option).column_name = "chd_alb_", (column_option).column_suffix = "${entity_id}"];
  repeated MetaSummary episode_summary = 6 [(field_option).column_group = CHILD_EPISODE, (column_option).column_name = "chd_epd_", (column_option).column_suffix = "${entity_id}", (column_option).order_by = "order,entity_id"];
  repeated MetaSummary people_summary = 7 [(field_option).column_group = CHILD_PEOPLE, (column_option).column_name = "chd_pep_", (column_option).column_suffix = "${entity_id}"];

  // Store <name,value> pair specific terms
  repeated KeyValuePair key_value_pair = 8 [(field_option).column_group = KEY_VALUE_PAIR, (column_option).column_name = "kvp_", (column_option).column_suffix = "${name}"];

  optional bool deleted = 9 [default = false, (column_option).has_value = false, (field_option).column_group = DELETED, (column_option).column_name = "del"];
}
